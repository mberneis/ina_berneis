<!DOCTYPE html>
<html lang="{lang}" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title} - Ina Berneis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link href="{css_path}style.css?v=3" rel="stylesheet">
    <script>
        // Dark mode detection and initialization
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {{
            document.documentElement.classList.add('dark')
        }} else {{
            document.documentElement.classList.remove('dark')
        }}
    </script>
</head>
<body class="h-full text-gray-900 transition-colors duration-300 bg-white dark:bg-gray-950 dark:text-gray-100">
    <!-- Mobile Header -->
    <header class="fixed top-0 left-0 right-0 z-40 flex items-center justify-between px-4 py-3 border-b border-gray-200 md:hidden bg-gray-50 dark:bg-gray-900 dark:border-gray-800">
        <div>
            <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Ina Berneis</h1>
            <p class="text-xs text-gray-600 dark:text-gray-400">{photographer_label} <span class="text-gray-500 dark:text-gray-500">1927 - 2003</span></p>
        </div>
        <div class="flex items-center gap-2">
            <button id="dark-mode-toggle-mobile" class="p-2 transition-colors rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800" aria-label="Toggle dark mode">
                <svg id="theme-icon-mobile" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
            </button>
            <button id="menu-toggle" class="p-2 transition-colors rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800" aria-label="Toggle menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path id="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="menu-overlay" class="fixed inset-0 z-40 hidden md:hidden bg-black/50" aria-hidden="true"></div>

    <!-- Photo Lightbox -->
    <div id="lightbox" class="lightbox" aria-hidden="true">
        <img id="lightbox-img" src="" alt="">
    </div>

    <div class="flex h-full">
        <!-- Vertical Navigation Sidebar -->
        <nav id="sidebar" class="fixed inset-y-0 left-0 z-50 flex flex-col w-64 min-h-screen p-6 transition-transform duration-300 ease-in-out transform -translate-x-full border-r border-gray-200 md:static bg-gray-50 dark:bg-gray-900 dark:border-gray-800 md:translate-x-0">
            <!-- Site Title -->
            <div class="hidden mb-8 md:block">
                <h1 class="mb-2 text-3xl font-bold text-gray-900 dark:text-gray-100">Ina Berneis</h1>
                <p class="text-sm text-gray-600 dark:text-gray-400">{photographer_label}</p>
                <p class="mt-1 text-xs text-gray-500 dark:text-gray-500">1927 - 2003</p>
            </div>

            <!-- Mobile: Close button and spacing -->
            <div class="flex justify-end mb-4 -mt-2 -mr-2 md:hidden">
                <button id="menu-close" class="p-2 transition-colors rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800" aria-label="Close menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Language Switcher and Dark Mode -->
            <div class="flex items-center justify-between gap-2 pb-6 mb-8 border-b border-gray-200 dark:border-gray-800">
                <div class="flex gap-2">
                    <a href="../en/{page_name}.html" class="px-3 py-1 text-sm rounded {lang_en_active} transition-colors">EN</a>
                    <a href="../de/{page_name}.html" class="px-3 py-1 text-sm rounded {lang_de_active} transition-colors">DE</a>
                </div>
                <button id="dark-mode-toggle" class="p-2 transition-colors rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800" aria-label="Toggle dark mode">
                    <svg id="theme-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                </button>
            </div>

            <!-- Navigation Links -->
            <ul class="flex-1 space-y-1">
                <li>
                    <a href="life.html" class="nav-link {life_active}">{life_label}</a>
                </li>
                <li>
                    <a href="hollywood.html" class="nav-link {hollywood_active}">{hollywood_label}</a>
                </li>
                <!-- <li>
                    <a href="career.html" class="nav-link {career_active}">{career_label}</a>
                </li> -->
                <li class="mt-6">
                    <h2 class="px-3 mb-2 text-xs font-semibold tracking-wider text-gray-500 uppercase dark:text-gray-500">{photography_label}</h2>
                    <ul class="space-y-1">
                        {nav_items}
                    </ul>
                </li>
                <li class="mt-6">
                    <h2 class="px-3 mb-2 text-xs font-semibold tracking-wider text-gray-500 uppercase dark:text-gray-500">{movies_label}</h2>
                    <ul class="space-y-1">
                        {movie_nav_items}
                    </ul>
                </li>
            </ul>

            <!-- Footer -->
            <div class="pt-6 mt-8 border-t border-gray-200 dark:border-gray-800">
                <p class="text-xs text-gray-500 dark:text-gray-500">&copy; <span id="copyright-year"></span> Estate of Ina Berneis</p>
                <script>document.getElementById('copyright-year').textContent = new Date().getFullYear();</script>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 pt-16 overflow-y-auto md:pt-0">
            <div class="max-w-5xl px-4 py-8 mx-auto md:px-8 md:py-12">
                {content}
            </div>
        </main>
    </div>

    <!-- Mobile Menu Script -->
    <script>
        (function() {{
            const menuToggle = document.getElementById('menu-toggle');
            const menuClose = document.getElementById('menu-close');
            const menuOverlay = document.getElementById('menu-overlay');
            const sidebar = document.getElementById('sidebar');

            function openMenu() {{
                sidebar.classList.remove('-translate-x-full');
                sidebar.classList.add('translate-x-0');
                menuOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }}

            function closeMenu() {{
                sidebar.classList.add('-translate-x-full');
                sidebar.classList.remove('translate-x-0');
                menuOverlay.classList.add('hidden');
                document.body.style.overflow = '';
            }}

            menuToggle.addEventListener('click', openMenu);
            menuClose.addEventListener('click', closeMenu);
            menuOverlay.addEventListener('click', closeMenu);

            // Close menu on navigation link click (mobile)
            sidebar.querySelectorAll('a').forEach(link => {{
                link.addEventListener('click', () => {{
                    if (window.innerWidth < 768) {{
                        closeMenu();
                    }}
                }});
            }});

            // Reset on resize
            window.addEventListener('resize', () => {{
                if (window.innerWidth >= 768) {{
                    closeMenu();
                }}
            }});
        }})();
    </script>

    <!-- Lightbox Script -->
    <script>
        (function() {{
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');

            function openLightbox(src, alt) {{
                lightboxImg.src = src;
                lightboxImg.alt = alt || '';
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
            }}

            function closeLightbox() {{
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            }}

            // Click on photo to open lightbox
            document.querySelectorAll('.photo-container').forEach(container => {{
                container.addEventListener('click', function() {{
                    const img = this.querySelector('img');
                    if (img) {{
                        openLightbox(img.src, img.alt);
                    }}
                }});
            }});

            // Click anywhere on lightbox to close
            lightbox.addEventListener('click', closeLightbox);

            // Close on Escape key
            document.addEventListener('keydown', function(e) {{
                if (e.key === 'Escape') {{
                    if (lightbox.classList.contains('active')) {{
                        closeLightbox();
                    }} else {{
                        // Close menu if open
                        const sidebar = document.getElementById('sidebar');
                        const menuOverlay = document.getElementById('menu-overlay');
                        if (!menuOverlay.classList.contains('hidden')) {{
                            sidebar.classList.add('-translate-x-full');
                            sidebar.classList.remove('translate-x-0');
                            menuOverlay.classList.add('hidden');
                            document.body.style.overflow = '';
                        }}
                    }}
                }}
            }});
        }})();
    </script>

    <!-- Dark Mode Toggle Script -->
    <script>
        (function() {{
            const toggle = document.getElementById('dark-mode-toggle');
            const toggleMobile = document.getElementById('dark-mode-toggle-mobile');
            const icon = document.getElementById('theme-icon');
            const iconMobile = document.getElementById('theme-icon-mobile');

            // Get current mode: 'dark', 'light', or 'system'
            function getMode() {{
                if (localStorage.theme === 'dark') return 'dark';
                if (localStorage.theme === 'light') return 'light';
                return 'system';
            }}

            function applyMode(mode) {{
                if (mode === 'dark') {{
                    document.documentElement.classList.add('dark');
                    localStorage.theme = 'dark';
                }} else if (mode === 'light') {{
                    document.documentElement.classList.remove('dark');
                    localStorage.theme = 'light';
                }} else {{
                    localStorage.removeItem('theme');
                    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {{
                        document.documentElement.classList.add('dark');
                    }} else {{
                        document.documentElement.classList.remove('dark');
                    }}
                }}
                updateIcons(mode);
            }}

            function updateIcons(mode) {{
                let path;
                if (mode === 'light') {{
                    // Sun icon for light mode
                    path = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
                }} else if (mode === 'dark') {{
                    // Moon icon for dark mode
                    path = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
                }} else {{
                    // Computer/monitor icon for system mode
                    path = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>';
                }}
                icon.innerHTML = path;
                iconMobile.innerHTML = path;
            }}

            function cycleMode() {{
                const current = getMode();
                let next;
                if (current === 'light') next = 'dark';
                else if (current === 'dark') next = 'system';
                else next = 'light';
                applyMode(next);
            }}

            // Cycle: light -> dark -> system -> light
            toggle.addEventListener('click', cycleMode);
            toggleMobile.addEventListener('click', cycleMode);

            // Initialize icons
            updateIcons(getMode());

            // Listen for system preference changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {{
                if (getMode() === 'system') {{
                    if (e.matches) {{
                        document.documentElement.classList.add('dark');
                    }} else {{
                        document.documentElement.classList.remove('dark');
                    }}
                }}
            }});
        }})();
    </script>
</body>
</html>
